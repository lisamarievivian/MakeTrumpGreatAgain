!function(){var t=function(t){var e={exports:{}};return t.call(e.exports,e,e.exports),e.exports},e=(window,function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()),n=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};t(function(t,r){"use strict";function i(t){for(var e=t.split("&"),n=0;n<e.length;n++){var r=e[n].split("=");if("quantity"===r[0])return r[1]}return 1}function o(t,e){window.ShopifyAnalytics.lib.track("Added Product",s({variantId:t.id,productId:t.product_id,currency:window.ShopifyAnalytics.meta.currency,quantity:e,price:t.price/100,name:t.title,sku:t.sku,brand:t.vendor,variant:t.variant_title,category:t.product_type},a()))}function a(){var t={};return window.ShopifyAnalytics.meta.page&&(t={pageType:window.ShopifyAnalytics.meta.page.pageType,resourceType:window.ShopifyAnalytics.meta.page.resourceType,resourceId:window.ShopifyAnalytics.meta.page.resourceId}),t}function s(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function t(e,r,i,o){n(this,t),this.xhr=e,this.url=r,this.method=i,this.body=o}return e(t,null,[{key:"handleXhrOpen",value:function(){}}]),e(t,[{key:"onReadyStateChange",value:function(){this.xhr.readyState===XMLHttpRequest.DONE&&this.handleXhrDone({method:this.method,url:this.url,body:this.body,xhr:this.xhr}),this.oldOnReadyStateChange&&this.oldOnReadyStateChange()}},{key:"handleXhrDone",value:function(t){try{switch(t.url){case"/cart/add.js":t.xhr.responseText&&o(JSON.parse(t.xhr.responseText),i(t.body));break;case"/cart/change.js":case"/cart/clear.js":case"/cart.js":t.xhr.responseText&&this.facebookMessengerPayment(JSON.parse(t.xhr.responseText))}}catch(e){console&&console.warn&&console.warn("[shop_events_listener] Error in handleXhrDone:  "+e.message)}}},{key:"facebookMessengerPayment",value:function(t){window.MessengerExtensions&&window.MessengerExtensions.isInExtension()&&window.MessengerExtensions.updateCart(function(){},function(){},t.item_count,"https://"+this._hostName()+"/cart",300)}},{key:"_hostName",value:function(){return window.location.hostname}}]),t}();r["default"]=u,function(){function t(t,e,n){window.jQuery&&window.jQuery(t).bind?window.jQuery(t).bind(e,n):t.addEventListener?t.addEventListener(e,n):t.attachEvent&&t.attachEvent("on"+e,n)}function e(t){if(t=t||window.event,!(t.defaultPrevented||t.isDefaultPrevented&&t.isDefaultPrevented())){var e=t.target||t.srcElement;if(e&&(e.getAttribute("action")||e.getAttribute("href")))try{var n=void 0;n=e.id.options?e.id.options[e.id.selectedIndex]:e.id;var r=n.value,i=o(r);i.quantity=e.quantity?e.quantity.value:1,window.ShopifyAnalytics.lib.track("Added Product",i)}catch(a){console&&console.warn&&console.warn("[shop_events_listener] Error in handleSubmitCartAdd: "+a.message)}}}function n(t){t=t||window.event;var e=t.target||t.srcElement;if(e&&e.getAttribute("action"))try{window.ShopifyAnalytics.lib.track("Added Payment",{currency:window.ShopifyAnalytics.meta.currency})}catch(n){console&&console.warn&&console.warn("[shop_events_listener] Error in handleSubmitToPaymentAdd: "+n.message)}}function r(t){t=t||window.event,i(t.currentTarget)}function i(t){try{var e=void 0;if(e=t.id.options&&t.id.options[t.id.selectedIndex]?t.id.options[t.id.selectedIndex]:t.id,!e)return;var n=e.value;if(window.ShopifyAnalytics.meta.selectedVariantId&&window.ShopifyAnalytics.meta.selectedVariantId==n)return;window.ShopifyAnalytics.meta.selectedVariantId=n;var r=o(n);window.ShopifyAnalytics.lib.track("Viewed Product Variant",r)}catch(i){console&&console.warn&&console.warn("[shop_events_listener] Error in trackViewedProductVariant: "+i.message)}}function o(t){var e=u(t),n=a(),r=s(e,n);return r.currency=window.ShopifyAnalytics.meta.currency,r}function u(t){var e=void 0,n=window.ShopifyAnalytics.meta.product;if(n){e={productId:n.id,brand:n.vendor,category:n.type};for(var r=0;r<n.variants.length;r++)if(n.variants[r].id==t){var i=n.variants[r];e=s(e,{variantId:t,price:i.price/100,name:i.name,sku:i.sku,variant:i.public_title})}}else e={variantId:t};return e}t(window,"load",function(){for(var o=0;o<document.forms.length;o++){var a=document.forms[o].getAttribute("action");a&&a.indexOf("/cart/add")>=0&&(t(document.forms[o],"submit",e),t(document.forms[o],"change",r),i(document.forms[o]));var s=document.forms[o].elements.previous_step;s&&"payment_method"===s.value&&t(document.forms[o],"submit",n)}})}(),function(t){var e=t.prototype.open,n=t.prototype.send;t.prototype.open=function(t,n){this._url=n,this._method=t,u.handleXhrOpen(),e.apply(this,arguments)},t.prototype.send=function(t){var e=new u(this,this._url,this._method,t);this.addEventListener?this.addEventListener("readystatechange",e.onReadyStateChange.bind(e),!1):(e.oldOnReadyStateChange=this.onreadystatechange,this.onreadystatechange=e.onReadyStateChange),n.call(this,t)}}(XMLHttpRequest)})}();